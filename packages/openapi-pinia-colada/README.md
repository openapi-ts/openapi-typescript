# openapi-pinia-colada

openapi-pinia-colada is a type-safe tiny wrapper (1 kb) around [`@pinia/colada`](https://pinia-colada.esm.dev/) to work with OpenAPI schema.

It works by using [`openapi-fetch`](../openapi-fetch) and [`openapi-typescript`](../openapi-typescript) so you get all the following features:

- âœ… No typos in URLs or params.
- âœ… All parameters, request bodies, and responses are type-checked and 100% match your schema
- âœ… No manual typing of your API
- âœ… Eliminates `any` types that hide bugs
- âœ… Eliminates `as` type overrides that can also hide bugs

## Setup

Install this library along with [`openapi-fetch`](../openapi-fetch) and [`openapi-typescript`](../openapi-typescript):

```bash
npm i openapi-pinia-colada openapi-fetch
npm i -D openapi-typescript typescript
```

Next, generate TypeScript types from your OpenAPI schema using openapi-typescript:

```bash
npx openapi-typescript ./path/to/api/v1.yaml -o ./src/lib/api/v1.d.ts
```

## Usage

Once your types have been generated from your schema, you can create a [fetch client](../openapi-fetch), a Pinia Colada client and start querying your API.

```vue
<script lang="ts" setup>
import createFetchClient from "openapi-fetch";
import createClient from "openapi-pinia-colada";
import type { paths } from "./my-openapi-3-schema"; // generated by openapi-typescript

const fetchClient = createFetchClient<paths>({
  baseUrl: "https://myapi.dev/v1/",
});
const $api = createClient(fetchClient);

const { data, error, isPending } = $api.useQuery(
    "get",
    "/blogposts/{post_id}",
    {
      params: {
        path: { post_id: 5 },
      },
    }
  );
</script>

<template>
  <div v-if="isPending || !data">Loading...</div>
  <div v-else-if="error">{{`An error occurred: ${error.message}`}}</div>
  <div v-else>{{data.title}}</div>
</template>
```

> You can find more information about `createFetchClient` in the [openapi-fetch documentation](../openapi-fetch).

## ðŸ““ Docs

[View Docs](https://openapi-ts.dev/openapi-pinia-colada/)
